<!DOCTYPE html>

<html lang ="en">

<head>
  <meta charset="utf-8" />
  <title>Upload Notes</title>

  <link rel="stylesheet" href="upload.css">

</head>

<body>

  <!-- User Display Section -->
  <header>
    <div id="user-display" style="float: right; margin: 10px;">Welcome, Guest</div> <!-- Placeholder for user name -->
  </header>

  <div class="user">
    <div id="return">
      <a href="homepage.html">Back</a>
    </div>
    <div id="complete">
      <button type="submit" id="subN" onclick="return uploadNote()" value="process">Upload<span class="badge" style="vertical-align: top; font-size: small; color: #E86A92;" id="count">0</span></button>
    </div>
  </div>

  <br>

  <div class="main">
    <h1>Select a File</h1>
    <label id="imgButton">
      <input type="file" id="fileUpload" accept="image/*" onchange="document.getElementById('displayOptions').style.display='block';">
      Upload your Notes
    </label>

  <h1>Select and Crop Image</h1>
  <div id="help">
    <p>If you want to upload your entire image or if your image contains strictly text, chose the according options below. If there is a combination of both text and diagrams, crop the according parts and upload them at the bottom of the page.</p>
  </div>

      <div id="displayOptions">
        <button type="submit" class="u1" onclick="return addScreenshot2()" value="process">Upload as Image</button>
        <button type="submit" class="u1" onclick="return addScreenshot3()" value="process">Upload as Text</button>
      </div>
      
      <br>
      <img hidden id="sourceImage" src="" alt="Source" />
      <canvas id="selectionCanvas" width=640px height=480px></canvas>
      <h2>Cropped Region</h2>
      <canvas id="croppedCanvas"></canvas>

        <br>
    
        <div id="textModal" class="modal">
          <div class="modal-content">
            <span class="close-button" onclick="closeModal('textModal')">&times;</span>
              <h3>Edit Text</h3>
              <textarea id="textInput" rows="8" cols="50" placeholder="Edit your text here..."></textarea><br>
              <button class="modalB" id="saveText" onclick="saveText()">Save Text</button>
              <button class="modalB" id="cancel" onclick="closeModal('textModal')">Cancel</button>
          </div>
        </div>


      <form name="selectionType" method="get" onsubmit="return addScreenshot(event)">
        <div class="radioB">
        <input type="radio" id="imgSelect" name="imgType" value="imgSelect" />
        <label for="imgSelect">Image</label>
        <input type="radio" id="txtSelect" name="imgType" value="txtSelect" />
        <label for="txtSelect">Text</label>
        </div>
        <button type="submit" class="sub" value="process">Confirm Selection</button>
      </form>

      <div id="uploadModal" class="modal">
        <div class="modal-content" id="uModal-c">
          <span class="close-button" onclick="closeModal('uploadModal')">&times;</span>
          <div id="formT">
            <div class="input-box">
              <input type="text" id="title" maxlength="50" required>
              <label>Title</label>
            </div>
            <div class="input-box">
              <input type="text" id="course" maxlength="9" required>
              <label>Course Code</label>
            </div>
          </div>
          <div id="message" style="color: #f56476; margin-top: 10px;"></div>
          <div id="grid">
            <canvas id="imgCanvas" width=640px height=480px></canvas>
            <div id="txtCanvas" style="position: relative; width: 80%; padding: 10px; overflow: hidden; display: none;">
              <p id="innerTxt" style="margin: 0; padding-right: 40px; overflow-wrap: break-word;"></p>
              <!-- Trash badge will be dynamically added here -->
            </div>
          </div>
          <div id="arrows">
            <div id="i">
              <input type="button" onclick="nextImg(false)" value="ᐊ" class="browse">
              <input type="button" onclick="nextImg(true)" value="ᐅ" class="browse">
            </div>
            <div id="t">
              <input type="button" onclick="nextTxt(false)" value="ᐊ" class="browse">
              <input type="button" onclick="nextTxt(true)" value="ᐅ" class="browse">
            </div>
          </div>
            <button class="modalB" id="saveText" onclick="confirmUpload()">Confirm</button>
            <button class="modalB" id="cancel" onclick="closeModal('uploadModal')">Cancel</button>
        </div>
      </div>
  </div>

</body>

<br>
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="upload.js"></script>

</html>
